<!DOCTYPE html>
<html lang="es">
<head>
  {% load static %}
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Enrok</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --fuente-principal: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }

    * {
      font-family: var(--fuente-principal) !important;
      box-sizing: border-box;
    }

    body { 
      min-height: 100vh; 
      display: grid; 
      place-items: start center;
      background: #0f172a; 
      margin: 0;
      padding-top: 2rem; 
    }

    /* ======= CARD ======= */
    .card {
      width: 95vw;            
      max-width: 1200px;      
      margin: 1rem;           
      min-height: 80vh;       
      color: #0b1220; 
      background: #ffffff;
      padding: 2rem; 
      border-radius: 12px;
      box-shadow: 0 18px 40px rgba(0,0,0,.25);
    }

    /* ======= LOGO ======= */
    .logo-box {
      position: relative;
      background: linear-gradient(135deg, #002952 0%, #244a7a 100%);
      display: flex;
      justify-content: center; /* centra el logo */
      align-items: center;
      margin-bottom: 1rem;
      padding: 1.5rem;
      border-radius: 12px;
    }

    .logo-img {
      height: 70px;
      width: auto;
      object-fit: contain;
      transition: transform 0.2s ease-in-out;
    }

    .logo-img:hover {
      transform: scale(1.05);
    }

    /* ======= USER BOX ======= */
    .user_box {
      display: block;
      position: absolute;
      top: 1rem;
      right: 1.5rem;
      background: #ffcf56;
      color: #0b1220;
      align-items: center;        /* centra horizontalmente */
      justify-content: center;    /* centra verticalmente */
      gap: 0.25rem;
      padding: .6rem 1.2rem;
      border-radius: 12px;
      font-weight: 700;
      box-shadow: 0 4px 10px rgba(0,0,0,.15);
      font-size: .9rem;
      text-align: center;
    }

    /* ======= BOTÓN LOGOUT ======= */
    .logout_btn {
      margin-top: .5rem;
      padding: 4px 10px;
      text-decoration: none;
      display: inline-block;
      color: #ffcf56;
      background: #002952;
      border: none;
      font-size: .7rem;
      font-weight: 600;
      text-align: center;
      cursor: pointer;
      transition: 0.3s;
      border-radius: 12px;
    }

    .logout_btn:hover {
      background: #244a7a;
    }

    /* ======= PENDIENTE BOX ======= */
    .pendiente-box {
      width: 190px;
      height: 150px;
      background: linear-gradient(135deg, #002952 0%, #244a7a 100%);
      color: white; 
      padding: 0.3rem; 
      border-radius: 12px; 
      text-align: center; 
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .pendiente-box h2, .reporte h2 { 
      margin: 0; 
      font-size: 1rem; 
      font-weight: 900; 
    }

    .pendiente-box .monto { 
      font-size: 1rem; 
      font-weight: 600; 
      margin: 0;
      color: #ffcf56;
    }
/* ======= STATS BOX (Contenedor) ======= */
.stats-box {
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
  align-items: center;
}

/* ======= REPORTES BOX ======= */ 
.reporte {
  width: 190px;
  height: 150px;
  background: linear-gradient(135deg, #002952 0%, #244a7a 100%);
  color: white; 
  padding: 0.3rem; 
  border-radius: 12px; 
  text-align: center; 
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-decoration: none;
}


.reporte:hover {
  transform: scale(1.03);
}


    /* ======= BOTONES ======= */
    .btn{
      padding: 2px 8px;
      text-decoration: none;
      display: inline-block;
      color: #ffcf56;
      background: transparent;
      border: none;
      font-weight: 200;
      text-align: center;
      line-height: 30px;
      font-size: .9rem;
      cursor: pointer;
      transition: 0.3s;
    }

    .a_user{
      color: #00101f;
      text-decoration: none;
    }
    .a_user:hover{
      text-decoration: underline;
    }

    .btn:hover {
      background: linear-gradient(135deg, #002952 0%, #244a7a 100%);
    }

    .actions {
      margin-top: .5rem;
      margin-bottom: .5rem; 
      display: flex;
      gap: .6rem;
      justify-content: center;
      background: linear-gradient(135deg, #00101f 0%, #294b7c 100%);
      border-radius: 12px;
    }

    .actions > * {
      flex: 1;
      text-align: center;
      min-width: 0; 
    }

    /* ======= CALENDARIO ======= */
    .calendar {
      margin-top: 2rem;
      width: 400px;
      height: 300px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,.12);
      border: 1px solid #aebed2;
    }

    .calendar iframe {
      width: 100%;
      height: 100%;
      border: 0;
      display: block; 
    }

    /* ======= INSPIRACIÓN ======= */
    .insp {
      margin-left: 1rem;
      position: relative;
      width: 750px;
      height: 500px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,.12);
      border: 1px solid #aebed2;
      margin-top: 1rem;
    }

    .frase-dia {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #fff;
      font-size: 1.4rem;
      font-weight: 600;
      padding: 1rem 2rem;
      background: rgba(0, 0, 0, 0.35);
      border-radius: 12px;
      backdrop-filter: blur(2px);
    }

    /* ======= RESPONSIVE ======= */
    @media (max-width: 900px) {
      .logo-box {
        flex-direction: column;
        gap: 1rem;
      }
      .insp {
        width: 100%;
        height: 300px;
      }
      .calendar {
        width: 100%;
      }
      .actions {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div class="card">
    <div class="logo-box">
      <img src="{% static 'img/logo.png' %}" alt="Enrok" class="logo-img">
      <div class="user_box">
        <a class="a_user" href="{% url 'usuario' %}">
          <strong>{{ user.get_full_name|default:user.username }}</strong>
        </a>
        <small>{{ user.groups.all.0.name|default:"Sin grupo" }}</small>
        <br>
          <form action="{% url 'logout' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="logout_btn">Cerrar sesión</button>
          </form>
      </div>
    </div>

    <div class="actions">
      <a class="btn" href="/clientes/listar" style="border-radius: 12px 0 0 12px;"><h2>Clientes</h2></a>
      <a class="btn" href="/dispersiones/listar"><h2>Dispersiones</h2></a>
      <a class="btn" href="/comisiones/listar" style="border-radius: 0 12px 12px 0;"><h2>Comisiones</h2></a>
    </div>

    <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:1rem; margin-top:1rem;">
      <div style="display:grid; gap:1rem;">
        <div class="calendar">
          <iframe src="https://calendar.google.com/calendar/embed?src=918d8566d66d31dd658f6f0c95cd23441c22fe7db57bc5b3d7d28fa7c9a7caba%40group.calendar.google.com&ctz=America%2FMexico_City"></iframe>
        </div>
    <div class="stats-box">
      <div class="pendiente-box">
        <h2>Clientes activos:</h2>
        <strong class="monto">{{ clientes|length }}</strong>
      </div>
      <a href="{% url 'reporte_dispersiones' %}" class="reporte">
        <div>
          <h2>Ver reportes</h2>
        </div>
      </a>
    </div>
      </div>

      <div class="insp">
        <img src="{% static 'img/insp.jpg' %}" alt="insp" style="width:100%;height:100%;object-fit:cover;display:block;">
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const frases = [
        "Haz que las cosas pasen.",
        "Cada día cuenta.",
        "El esfuerzo vence al talento.",
        "Sigue avanzando, aunque sea despacio.",
        "Nada cambia si tú no cambias.",
        "Los pequeños pasos crean grandes resultados.",
        "Haz hoy lo que otros no quieren, y mañana vivirás como otros no pueden.",
        "La disciplina es el puente entre metas y logros.",
        "Tu actitud define tu altitud.",
        "La clave del éxito está en comenzar."
      ];

      const fraseAleatoria = frases[Math.floor(Math.random() * frases.length)];
      const contenedor = document.createElement("div");
      contenedor.classList.add("frase-dia");
      contenedor.textContent = fraseAleatoria;
      const insp = document.querySelector(".insp");
      if (insp) insp.appendChild(contenedor);
    });
  </script>
</body>
</html>
