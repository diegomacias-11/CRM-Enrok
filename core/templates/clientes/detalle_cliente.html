{% extends 'base_listar.html' %}
{% load humanize %}
{% block title %}Detalle de Dispersión — Cliente{% endblock %}

{% block title_filters %}
  <div class="card-top">
    <h1>Detalle de Dispersión — {{ cliente.nombre }} ({{ mes_nombre }} {{ anio }})</h1>

    <div class="pendiente-box">
      <div>
        <h2>Total Pendiente</h2>
        <strong class="monto">${{ total_pendiente|floatformat:2|intcomma }}</strong>
      </div>
    </div>
  </div>
{% endblock %}

{% block content %}
  <div class="card">
    <div class="table-container">
      <table>
        <tr>
          <th>Factura</th>
          <th>Monto</th>
          <th>Total Honorarios</th>
          <th>Estatus Pago</th>
        </tr>

        {% for d in dispersiones %}
        <tr>
          <td>{{ d.num_factura_honorarios|default_if_none:"Pendiente"|default:"Pendiente" }}</td>
          <td>${{ d.monto|floatformat:2|intcomma }}</td>
          <td>${{ d.total_honorarios|floatformat:2|intcomma }}</td>
          <td>{{ d.estatus_pago }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" style="text-align:center;">No hay registros para este mes.</td>
        </tr>
        {% endfor %}
      </table>
    </div>

    <div style="margin-top:.5rem;text-align:center;">
      <a href="{% url 'dispersiones_cliente' %}" class="btn filtro_pagado">Volver</a>
    </div>
  </div>
{% endblock %}
